<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xalan="http://xml.apache.org/xslt">
	<xsl:output method="xml" indent="yes" xalan:indent-amount="2" />
	<xsl:param name="desiredQuantity">50</xsl:param>
	<xsl:template match="/InventorySnapShot">
		<MultiApi>
			<API FlowName="" IsExtendedDbApi="" Name="adjustInventory" Version="">
				<Input>
					<Items>
						<xsl:for-each select="ShipNode/Item/SupplyDetails[@Quantity &lt; $desiredQuantity]">
							<Item AdjustmentType="ADJUSTMENT" ShipNode="{../../@ShipNode}" SupplyType="ONHAND" RemoveInventoryNodeControl="Y" >
								<xsl:attribute name="ItemID"><xsl:value-of select="../@ItemID" /></xsl:attribute>
								<xsl:attribute name="UnitOfMeasure"><xsl:value-of select="../@UnitOfMeasure" /></xsl:attribute>
								<xsl:attribute name="ProductClass"><xsl:value-of select="../@ProductClass" /></xsl:attribute>
								<xsl:attribute name="InventoryOrganizationCode"><xsl:value-of select="../@InventoryOrganizationCode" /></xsl:attribute>
								<xsl:attribute name="Quantity"><xsl:value-of select="$desiredQuantity - @Quantity" /></xsl:attribute>
							</Item>
						</xsl:for-each>
					</Items>
				</Input>
			</API>
		</MultiApi>
	</xsl:template>
</xsl:stylesheet>