<?xml version="1.0" encoding="UTF-8"?>
<project name="Ned Zhang Skunktool2" default="unzipEar" basedir=".">
	<description>
        This ant script refreshes the lib_ear folder with jars in smcfs.ear.
		It does not download the ear from SIT or DEV server automatically due to 
		the security restriction on the solaris box that pervents automatic login.
    </description>
	<!-- set global properties for this build -->
	<property name="earDownloadFolder"  location="ear_download"/>
	<property name="earExtractFolder" location="../lib_ear" />
	<!-- 
	  <property name="earRemoteUsername" value="sterling" />
	  <property name="earRemotePassword" value="password" />
	  <property name="earRemoteHost" value="10.96.87.161" />
	  <property name="earRemotePath" value="/opt/sterling/smcfs/app/SSFS/external_deployments/smcfs.ear" />
	-->

	<target name="init">
		<!-- Create the time stamp -->
		<tstamp/>
		<mkdir dir="${earDownloadFolder}"/>
		<mkdir dir="${earExtractFolder}"/>
	</target>

	<!-- Download ear does not work due to solaris box's (remote server) setting that does not allow cached username/password login
  User must use the scpSterlingEarFromSIT.sh to download the ear to the ${earDownloadFolder} folder
  <target name="downloadEar" depends="init"
        description="Download the Ear" >
        <echo message="${earRemoteUsername}:${earRemotePassword}@${earRemoteHost}:${earRemotePath}" />
        <scp file="${earRemoteUsername}@${earRemoteHost}:${earRemotePath}"
        password="${earRemotePassword}"
        todir="${earDownloadFolder}"
        verbose="true"
        />      
  </target>
  -->
	<target name="unzipEar" 
    description="extra all jar files from the ear file" depends="clean, init">
		<unzip src="${earDownloadFolder}/smcfs.ear" dest="${earExtractFolder}">
			<patternset>
				<include name="**/*.jar"/>
			</patternset>
		</unzip>

	</target>
	<target name="clean"
        description="clean up" >
		<!-- Delete the ${earExtractFolder} directory trees -->
		<delete dir="${earExtractFolder}"/>
	</target>
</project>